<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Abhishek Singh - Portfolio Tree</title>
<style>
  body {
    margin: 0; font-family: sans-serif; color: #333;
    display: flex; flex-direction: column; height: 100vh;
    background-color: #f9f9f9;
    background-image: radial-gradient(#ddd 1px, transparent 1px);
    background-size: 20px 20px;
  }
  header {
    text-align: center; padding: 1rem;
    border-bottom: 1px dashed #ccc; background: rgba(255,255,255,0.9);
    position: sticky; top: 0; z-index: 10;
    backdrop-filter: blur(4px);
  }
  main {
    flex: 1; display: flex; overflow: hidden;
  }
  #tree-container {
    flex: 2; display: flex; justify-content: center; align-items: center;
    overflow: hidden;
  }
  svg { width: 100%; height: 100%; }
  #detail-panel {
    flex: 1; max-width: 350px;
    border-left: 1px solid #ddd;
    background: rgba(255,255,255,0.9);
    padding: 1rem; overflow-y: auto;
    box-shadow: -2px 0 5px rgba(0,0,0,0.05);
    backdrop-filter: blur(4px);
    transition: transform 0.3s ease-in-out;
  }
  #detail-panel.hidden { transform: translateX(100%); }
  .panel-title { font-size: 18px; font-weight: bold; margin-bottom: 10px; }
  .panel-content { font-size: 14px; line-height: 1.5; }
  .link { fill: none; stroke: #bbb; stroke-width: 1.5px; stroke-dasharray: 3 3; }
  .node circle { fill: #fff; stroke: #333; stroke-width: 1.5px; }
  .node--collapsed circle { stroke-dasharray: 4 2; }
  .node--expanded circle { stroke-dasharray: none; }
  .node text { font-size: 13px; user-select: none; }
  .root-label { font-size: 14px; font-weight: bold; fill: #0077ff; }
  .node image { pointer-events: none; }
  @media (max-width: 768px) {
    main { flex-direction: column; }
    #detail-panel { max-width: none; border-left: none; border-top: 1px solid #ddd; transform: translateY(100%); }
    #detail-panel.hidden { transform: translateY(100%); }
    #detail-panel.visible { transform: translateY(0); }
  }
</style>
</head>
<body>
<header><h1>Portfolio Tree</h1></header>
<main>
  <div id="tree-container"><svg id="tree"></svg></div>
  <aside id="detail-panel" class="hidden">
    <div class="panel-title">Select a section</div>
    <div class="panel-content">Click on a node to see more details here.</div>
  </aside>
</main>

<script src="https://cdn.jsdelivr.net/npm/d3@7/dist/d3.min.js"></script>
<script>
const data = {
  name: "Abhishek Singh",
  photo: "https://images.unsplash.com/photo-1500648767791-00dcc994a43e?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&h=200&q=80",
  blurb: "Welcome to my portfolio! Explore my skills, education, experience, and digital credentials.",
  icon: "icons/profile.png",
  children: [
    {
      name: "Skills",
      blurb: "My technical skills.",
      icon: "icons/skills.svg",
      children: [
        {
          name: "Programming",
          icon: "icons/programming.svg",
          children: [
            { name: "Python", icon: "icons/python.svg", link: "https://www.python.org/" },
            { name: "R", icon: "icons/r.svg", link: "https://www.r-project.org/" },
            { name: "JavaScript", icon: "icons/javascript.svg", link: "https://developer.mozilla.org/en-US/docs/Web/JavaScript" },
            { name: "HTML", icon: "icons/html.svg", link: "https://developer.mozilla.org/en-US/docs/Web/HTML" },
            { name: "CSS", icon: "icons/css.svg", link: "https://developer.mozilla.org/en-US/docs/Web/CSS" },
            { name: "PHP", icon: "icons/php.svg", link: "https://www.php.net/" }
          ]
        },
        {
          name: "Visualization",
          icon: "icons/visualization.svg",
          children: [
            { name: "Looker", icon: "icons/looker.svg", link: "https://looker.com/" },
            { name: "PowerBI", icon: "icons/powerbi.svg", link: "https://powerbi.microsoft.com/" }
          ]
        },
        {
          name: "Database",
          icon: "icons/database.png",
          children: [
            { name: "BigQuery", icon: "icons/bigquery.svg", link: "https://cloud.google.com/bigquery" },
            { name: "Athena", icon: "icons/athena.svg", link: "https://aws.amazon.com/athena/" },
            { name: "MySQL", icon: "icons/mysql.svg", link: "https://www.mysql.com/" },
            { name: "PostgreSQL", icon: "icons/postgres.svg", link: "https://www.postgresql.org/" },
            { name: "Amazon RDS", icon: "icons/rds.svg", link: "https://aws.amazon.com/rds/" },
            { name: "MongoDB", icon: "icons/mongodb.svg", link: "https://www.mongodb.com/" }
          ]
        },
        {
          name: "Data Tools",
          icon: "icons/data-tools.png",
          children: [
            { name: "Scikit-learn", icon: "icons/scikit-learn.svg", link: "https://scikit-learn.org/" },
            { name: "Pandas", icon: "icons/pandas.svg", link: "https://pandas.pydata.org/" },
            { name: "NumPy", icon: "icons/numpy.svg", link: "https://numpy.org/" },
            { name: "Jupyter", icon: "icons/jupyter.svg", link: "https://jupyter.org/" },
            { name: "PySpark", icon: "icons/pyspark.svg", link: "https://pypi.org/project/pyspark/" },
            { name: "Spark", icon: "icons/spark.svg", link: "https://spark.apache.org/" },
            { name: "Airflow", icon: "icons/airflow.svg", link: "https://airflow.apache.org/" }
          ]
        },
        {
          name: "DevOps",
          icon: "icons/devops.png",
          children: [
            { name: "Docker", icon: "icons/docker.svg", link: "https://www.docker.com/" },
            { name: "Git", icon: "icons/git.svg", link: "https://git-scm.com/" },
            { name: "Linux/Unix", icon: "icons/linux.svg", link: "https://www.linux.org/" },
            { name: "Slack", icon: "icons/slack.svg", link: "https://slack.com/" },
            { name: "Cloud tech", icon: "icons/vpc.svg", children: [
                { name: "GCP", icon: "icons/gcp.svg", link: "https://cloud.google.com" },
                { name: "AWS", icon: "icons/aws.svg", link: "https://aws.amazon.com/" },
                { name: "VPC", icon: "icons/vpc.svg", link: "https://aws.amazon.com/vpc/" }
              ]
            },
            { name: "Security", icon: "icons/security.svg", link: "https://aws.amazon.com/security/" },
            { name: "Vim/Nano", icon: "icons/editor.svg", link: "https://www.vim.org/" }
          ]
        }
      ]
    },
    {
      name: "Education",
      blurb: "My academic background.",
      icon: "icons/education.svg",
      children: [
        { year: 2011, name: "B.Sc - University of Delhi", detail: "Life Sciences – First Division", icon: "icons/bachelor.svg" },
        { year: 2015, name: "M.Sc - Central University of Punjab", detail: "Human Genetics – First Class Distinction", icon: "icons/college.png" },
        { year: 2020, name: "Masters - University of Liverpool", detail: "Data Science & AI – First Class Distinction", icon: "icons/graduation.png" }
      ]
    },
    {
      name: "Experience",
      blurb: "My professional experience over the years.",
      icon: "icons/experience.svg",
      children: [
        {
          name: "Data Scientist - ONS",
          detail: "Office for National Statistics | Liverpool | UK 01/2023- Current",
          icon: "icons/experience.svg"
        },
        {
          name: "Data Scientist - BioGrad Diagnostics",
          detail: "Liverpool | UK 11/2021-01/2023. SQL, ETL, Data Visualisation, Cloud (AWS), Reporting.",
          icon: "icons/experience.svg"
        },
        {
          name: "Customer Service Advisor - Barclays",
          detail: "Liverpool | UK 03/2021-09/2021. Customer support, coordination, and service improvement.",
          icon: "icons/experience.svg"
        },
        {
          name: "Testing Support - University of Liverpool",
          detail: "Liverpool | UK 11/2020-04/2021. Part-time Test & Trace project.",
          icon: "icons/experience.svg"
        }
      ]
    },
    {
      name: "Digital Credentials",
      blurb: "Certificates and Badges.",
      icon: "icons/certificates.svg",
      children: [
        {
          name: "Certificates",
          children: [
            { name: "Applied Data Science Capstone", link: "https://www.coursera.org/account/accomplishments/verify/...", icon: "static/images/Applied_Data_Science_Capstone.png" }
          ]
        },
        {
          name: "Badges",
          children: [
            { name: "Python 101", icon: "static/images/Python_101_Data_Science.png", link: "https://www.credly.com/badges/8f794539-e7d1-408e-8aaa-910f8ab1668d" }
            // Add all other badges similarly here...
          ]
        }
      ]
    }
  ]
};

// --- D3 Tree Rendering ---
const svg = d3.select("#tree"), g = svg.append("g").attr("transform", "translate(40,40)");
let width = svg.node().clientWidth, height = svg.node().clientHeight;
let i = 0, duration = 400;
const treeLayout = d3.tree().size([width - 100, height - 120]);
let root = d3.hierarchy(data, d => d.children);
root.x0 = width / 2; root.y0 = 0;
root.children.forEach(collapse);
update(root);

function collapse(d) { if(d.children){ d._children = d.children; d._children.forEach(collapse); d.children = null; } }

function showDetails(d) {
  const panel = document.getElementById("detail-panel");
  panel.querySelector(".panel-title").textContent = d.data.name || d.data.year;
  panel.querySelector(".panel-content").textContent = d.data.blurb || d.data.detail || "No details available.";
  panel.classList.remove("hidden"); panel.classList.add("visible");
}

function update(source) {
  treeLayout(root);
  const nodes = root.descendants();
  const links = root.links();
  nodes.forEach(d => d.y = d.depth * 120);

  let node = g.selectAll("g.node").data(nodes, d => d.id || (d.id = ++i));
  const nodeEnter = node.enter().append("g")
    .attr("class", d => d.depth===0?"node root-node":(d._children?"node node--collapsed":"node node--expanded"))
    .attr("transform", d => `translate(${source.x0},${source.y0})`)
    .on("click", (_,d)=>{ if(d.children){ d._children=d.children; d.children=null;} else { d.children=d._children; d._children=null;} update(d); showDetails(d); });

  nodeEnter.filter(d=>d.depth!==0).append("circle").attr("r",1e-6);
  nodeEnter.filter(d=>d.data.icon).append("image")
    .attr("xlink:href", d=>d.data.icon)
    .attr("x",-12).attr("y",-12)
    .attr("width",24).attr("height",24);
  nodeEnter.filter(d=>d.depth===0).append("image")
    .attr("xlink:href", d=>d.data.photo)
    .attr("x",-25).attr("y",-25)
    .attr("width",50).attr("height",50)
    .style("clip-path","circle(25px at center)");

  nodeEnter.append("text")
    .attr("dy", d=>d.depth===0?40:-24)
    .attr("text-anchor","middle")
    .attr("class", d=>d.depth===0?"root-label":"")
    .text(d=>d.data.name || d.data.year)
    .style("fill-opacity",1e-6);

  const nodeUpdate = nodeEnter.merge(node);
  nodeUpdate.transition().duration(duration).attr("transform", d=>`translate(${d.x},${d.y})`);
  nodeUpdate.select("circle").attr("r",18);
  nodeUpdate.select("text").style("fill-opacity",1);
  nodeUpdate.attr("class", d => d.depth===0?"node root-node":(d._children?"node node--collapsed":"node node--expanded"));

  const nodeExit = node.exit().transition().duration(duration).attr("transform", d=>`translate(${source.x},${source.y})`).remove();
  nodeExit.select("circle").attr("r",1e-6); nodeExit.select("text").style("fill-opacity",1e-6);

  let link = g.selectAll("path.link").data(links, d=>d.target.id);
  const linkEnter = link.enter().insert("path","g").attr("class","link").attr("d", d=>{ let o={x:source.x0,y:source.y0}; return d3.linkVertical().x(d=>d.x).y(d=>d.y)({source:o,target:o});});
  link.merge(linkEnter).transition().duration(duration).attr("d", d3.linkVertical().x(d=>d.x).y(d=>d.y));
  link.exit().transition().duration(duration).attr("d", d=>{ let o={x:source.x,y:source.y}; return d3.linkVertical().x(d=>d.x).y(d=>d.y)({source:o,target:o});}).remove();
  nodes.forEach(d=>{d.x0=d.x; d.y0=d.y;});
}

function resize(){ width=svg.node().clientWidth; height=svg.node().clientHeight; treeLayout.size([width-100,height-120]); update(root);}
window.addEventListener("resize", resize);
</script>
</body>
</html>
